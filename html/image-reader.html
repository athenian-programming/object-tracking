<!doctype html>

<html>

<head>
    <title>Camera Images</title>
    <meta HTTP-EQUIV="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta HTTP-EQUIV="Pragma" content="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">

    <style>
        body {background-color: steelblue;}

        #status_div {
            font-size: 20px;
            padding-top: 10px;
            padding-bottom: 30px;
            padding-left: 10px;
        }

        #header_div {
            font-size: 20px;
            padding-top: 10px;
            padding-bottom: 10px;
            padding-left: 10px;
        }


        #image {
            border: 4px solid red;
        }

        #pause_div {
            //border: 1px solid #4CAF50;
            padding-top: 10px;
            padding-bottom: 30px;
        }

        .button {
            //background-color: #4CAF50; /* Green */
            border: 2px solid black;
            border-radius: 5px;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            font-size: 20px;
        }


    </style>

    <script>
        var paused = false;

        window.onload = function () {
            header = document.getElementById('header_div');
            header.innerHTML = "Camera: _NAME_ (_PAUSE_SECS_ secs)";
            setButton();
            loadImage();
        };

        function loadImage() {
            if (!paused) {
                warning = document.getElementById('status_div')
                img = new Image();
                img.onload = function(){
                    warning.innerHTML = "Connected to image server";
                    warning.style.backgroundColor = 'green'
                    ctx = document.getElementById('image').getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    setTimeout(loadImage, _PAUSE_SECS_ * 1000);
                };
                img.onerror = function(){
                    warning.innerHTML = "Disconnected from image server";
                    warning.style.backgroundColor = 'red'
                    setTimeout(loadImage, _PAUSE_SECS_ * 1000);
                }
                img.src = "/image.jpg";
            }
        }

        function setButton() {
            button = document.getElementById('pauseresume');
            button.style.backgroundColor = paused ? 'red' : 'green';
            button.value = paused ? 'Resume' : 'Pause';

            img = document.getElementById('image');
            img.style.borderColor = paused ? 'red' : 'green';
        }

        function togglePause() {
            paused = !paused
            setButton()
            loadImage();
        }

        function pauseChange(time) {
            window.location.href = "/image?pause=" + time;
        }

    </script>
</head>


<body>

<div id="status_div">
    <p id="status"></p>
</div>

<div id="header_div">
    <p id="header"></p>
</div>

<div id="image_div">
    <canvas id="image" width="_WIDTH_px" height="_HEIGHT_px" onclick="togglePause()"></canvas>
</div>

<div id="pause_div">
    <input type="button" id="pauseresume" class="button" value="Pause" onclick="togglePause()">
</div>

<table border="0">
    <tr>
        <td>
            <input type="button" id="pause0" class="button" value="0 secs" onclick="pauseChange('0')">
        </td>
        <td>
            <input type="button" id="pause0-1" class="button" value="0.1 secs" onclick="pauseChange('0.1')">
        </td>
        <td>
            <input type="button" id="pause0-25" class="button" value="0.25 secs" onclick="pauseChange('0.25')">
        </td>
        <td>
            <input type="button" id="pause0-5" class="button" value="0.5 secs" onclick="pauseChange('0.5')">
        </td>
        <td>
            <input type="button" id="pause1-0" class="button" value="1 secs" onclick="pauseChange('1')">
        </td>
        <td>
            <input type="button" id="pause5-0" class="button" value="5 secs" onclick="pauseChange('5')">
        </td>
    </tr>
</table>


</body>

</html>